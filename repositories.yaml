---
repository: &oss-repository
  full_name: pbrisbin/escaped
  description: Produce Text with terminal escape sequences
  private: false
  has_issues: true
  has_projects: false
  has_wiki: false
  default_branch: main
  allow_squash_merge: false
  allow_merge_commit: false
  allow_rebase_merge: true
  allow_auto_merge: true
  delete_branch_on_merge: true
  allow_update_branch: true

branch_protection: null

rulesets:
  - name: main
    target: branch
    enforcement: active
    bypass_actors: &default-bypass-actors
      - actor_type: RepositoryRole
        actor_id: 5 # Admin
        bypass_mode: always
      - actor_type: Integration
        actor_id: 927225 # @pbrisbin-automation
        bypass_mode: always
    conditions: &default-conditions
      ref_name:
        exclude: []
        include:
          - "~DEFAULT_BRANCH"
    rules:
      - type: deletion
      - type: non_fast_forward
      - type: pull_request
        parameters: &default-pull-request-rule-parameters
          allowed_merge_methods: [rebase]
          dismiss_stale_reviews_on_push: false
          require_code_owner_review: false
          require_last_push_approval: false
          required_approving_review_count: 0
          required_review_thread_resolution: true
      - type: required_status_checks
        parameters:
          required_status_checks:
            - context: "test (stack.yaml)"
              integration_id: 15368 # GitHub Actions
          strict_required_status_checks_policy: false

---
repository:
  <<: *oss-repository
  full_name: pbrisbin/ghctl
  description: CLI for maintaining GitHub settings as IaC

branch_protection: null

rulesets:
  - name: main
    target: branch
    enforcement: active
    bypass_actors: *default-bypass-actors
    conditions: *default-conditions

    rules:
      - type: deletion
      - type: non_fast_forward
      - type: pull_request
        parameters:
          <<: *default-pull-request-rule-parameters
      - type: required_status_checks
        parameters:
          required_status_checks:
            - context: test
              integration_id: 15368 # GitHub Actions
            - context: restyled
              integration_id: 15368 # GitHub Actions
          strict_required_status_checks_policy: false

---
repository:
  <<: *oss-repository
  full_name: pbrisbin/hs-shellwords
  description: Parse a string into words, like a shell would

branch_protection: null

rulesets:
  - name: main
    target: branch
    enforcement: active
    bypass_actors: *default-bypass-actors
    conditions: *default-conditions

    rules:
      - type: deletion
      - type: non_fast_forward
      - type: pull_request
        parameters:
          <<: *default-pull-request-rule-parameters
      - type: required_status_checks
        parameters:
          required_status_checks:
            - context: "test (stack.yaml)"
              integration_id: 15368 # GitHub Actions
            - context: restyled
              integration_id: 15368 # GitHub Actions
            - context: commitlint
              integration_id: 15368 # GitHub Actions
          strict_required_status_checks_policy: false

---
repository:
  <<: *oss-repository
  full_name: pbrisbin/setup-tool-action
  description: >-
    Generic action for installation of any tool that offers pre-compiled
    binaries for download

branch_protection: null

rulesets:
  - name: main
    target: branch
    enforcement: active
    bypass_actors: *default-bypass-actors
    conditions: *default-conditions

    rules:
      - type: deletion
      - type: non_fast_forward
      - type: pull_request
        parameters:
          <<: *default-pull-request-rule-parameters
      - type: required_status_checks
        parameters:
          required_status_checks:
            - context: "integration (macos-latest)"
              integration_id: 15368 # GitHub Actions
            - context: "integration (ubuntu-latest)"
              integration_id: 15368 # GitHub Actions
            - context: "integration (windows-latest)"
              integration_id: 15368 # GitHub Actions
            - context: test
              integration_id: 15368 # GitHub Actions
            - context: commitlint
              integration_id: 15368 # GitHub Actions
          strict_required_status_checks_policy: false
